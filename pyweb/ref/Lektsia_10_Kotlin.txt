 Санкт-Петербургский государственный университет
                телекоммуникаций
           им. проф. М. А. Бонч-Бруевича
        Кафедра Защищенных систем связи


 Разработка защищенного
программного обеспечения
        Лекция №10



Основы разработки на Kotlin



                              2
                      История

     Kotlin – статически типизированный язык
программирования, работающий поверх JVM и
разрабатываемый компанией JetBrains.
• Язык разрабатывается с 2010 года
• 15 февраля 2016 года – релиз
• Май 2017 года – официальный инструмент разработки
  для ОС Android
• Ноябрь 2017 года – выход Android Studio3.0 с
  доступным по умолчанию Kotlin

                                                      3
                      Особенности


•   Урезанная кодировка
•   Открытый исходный код
•   Быстрая компиляция
•   Функция расширения
•   Null-безопасность
•   Совместимость
•   Надёжные инструменты
•   Smart Cast
•   Низкая стоимость установления
                                    4
              Урезанная кодировка

    Kotlin — это язык программирования на
основе ООП, где строка кода может быть
урезана до 40%, что делает его удобным для
разработки программного обеспечения или
веб-разработки




                                             5
           Открытый исходный код

   Kotlin использует JVM и сочетает в себе
функции ООП и функционально-
ориентированного программирования




                                             6
              Быстрая компиляция
     Код легко компилируется при работе с Kotlin, что
приводит к повышению производительности для
разработки под Android, а также объясняет, какой тип
функции данных можно использовать во всем коде




                                                        7
               Функции расширения
    Kotlin может поддерживать различные функции
расширения, не внося никаких изменений в код, это
помогает сделать существующий код более понятным
для разработчиков
    Например:



Этот код поможет обрезать первый и последний символ
строки

                                                      8
              Null-безопасность
    В Kotlin система различает пустые ссылки и
ненулевые ссылки.
    Например, переменная String не может содержать
ноль:




                                                     9
             Совместимость
    Код Kotlin может использоваться Java, а
коды Java могут использоваться с
Kotlin. Некоторые приложения, написанные
на Java, можно использовать в среде Kotlin.




                                              10
           Надёжные инструменты
    Как и Java, код Kotlin также может быть написан с
использованием IDE или интерфейса командной
строки. С IDE легко работать, и синтаксические ошибки
также значительно сокращаются.




                                                        11
                   Smart Cast
     Smart Cast в основном помогает сократить расходы
на приложение и повышает его скорость или
производительность. Он работает над управлением
эффективностью кода, используя приведение типов или
неизменяемые значения.
     Например, если строка идентифицирована, то ее
длина и количество могут быть найдены с помощью
функции Smart Cast:




                                                        12
             Переменная Kotlin
В Kotlin все переменные должны быть
объявлены. Однако, если какая-либо переменная не
объявлена, возникает синтаксическая ошибка. Кроме
того, объявление переменной определяет тип
данных, которые мы разрешаем хранить в
переменной. В Kotlin переменные могут быть
определены с помощью ключевых слов val и var.


                                                    13
                     Переменная Kotlin
      Var подобен универсальной переменной, используемой в любом языке
программирования, который может использоваться несколько раз в одной
программе. Более того, вы можете изменить его значение в любое время в
программе. Поэтому он известен как изменяемая переменная.
      Вот пример изменяемой переменной в Kotlin:




                                                                         14
                  Переменная Kotlin
     Val похожа на постоянную переменную, и вы не можете
изменить ее значение позже в программе, которую нельзя назначать
несколько раз в одной программе и можно использовать только
один раз в конкретной программе.
     Вот пример неизменяемых переменных в Kotlin:




                                                                   15
                      Массивы
     В Kotlin массивы представляют собой изменяемое
взаимодействие одних и тех же типов данных, а не являются
нативными типами данных.
Некоторые свойства массива в Котлине:
• Размер массива нельзя изменить после объявления.
• Массивы в Котлине изменчивы.
• Массивы хранятся в смежных местах памяти.
• Доступ к массиву можно получить с помощью индексов,
  таких как [1], a [2] и так далее.
• Индекс массива начинается с нуля, то есть [0]
                                                            16
                             Массив
В Kotlin, массив может быть определен двумя различными методами
        Используя функцию arrayOf ():
        В Котлине широко используются библиотечные функции. Одной из
таких библиотечных функций является функция arrayOf (), которая
используется для определения массива путем передачи значений
переменных в функцию.



      Используя конструктор Array:
      В Котлине есть класс с именем Array. Следовательно, возможно
использовать массив конструктора для создания массива. Массив в
конструкторе содержит два основных параметра.

                                                                       17
                  Коллекции
   Коллекции в Kotlin используют
множество различных
интерфейсов: Iterable, Collection, Set, List,
 MutableIterable, MutableCollection и др.
   В Kotlin нет собственных коллекций,
только Java-коллекции. Но при этом в Kotlin
они обладают более широкими
возможностями, используя расширения.
                                                18
                             Коллекции
        Типы коллекций:
        Неизменная коллекция
        Этот тип коллекции поддерживает функции только для чтения. Нельзя
изменить его элементы.
        Методы включают:
List — listOf () и listOf <T> ()
Set — setOf ()
Map — mapOf ()
        Изменчивая коллекция
        Он поддерживает функции чтения и записи.
        Методы включают:
List — mutableListOf (), arrayListOf () и ArrayList
Set — mutableSetOf (), hashSetOf ()
Map — mutableMapOf (), hashMapOf () и HashMap
                                                                            19
                                   Циклы
В Kotlin доступно несколько вариантов циклов for.

val lst : List<Int> = listOf<Int>(10, 20, 30, 40, 50)
for(item in lst){
         println(item)
}
for(item in 0 until lst.size){
         println(lst[item])
}
for(item in 0..4){ //оператор диапазона (range)
         println(lst[item])
}

                                                        20
                       Функции
     Поскольку Котлин известен как статически
типизированный язык. Здесь ключевое слово ‘fun’
используется для объявления функции. В Kotlin существует
два типа функций, которые зависят исключительно от их
доступности в стандартной библиотеке или определении
пользователя.

     Стандартная библиотечная функция

     Определяемая пользователем функция
                                                           21
                              Функции
      Стандартная Библиотечная Функция
      Это встроенные библиотечные функции, которые могут быть определены
неявно и доступны для использования.




       Определяемая пользователем функция
       Как следует из названия, эти функции обычно создаются пользователями,
и их можно использовать для продвинутого программирования. Здесь функции
объявляются с использованием ключевого слова ‘fun’.



                                                                               22
                   Функции высшего порядка
В языке Kotlin функция, которая может принимать в качестве
параметра функцию или лямбда-выражение или же может
возвращать функцию, называется функцией высшего
порядка (higher-order function).
// лямбда-выражение
var lambda = {a: Int , b: Int -> a + b }
//функция высшего порядка
fun highfun( lmbd: (Int, Int) -> Unit) { // принимает лямбда-выражение как параметр
         var result = lmbd(2,4) // вызывает лямбда-выражение, передавая ему параметры
         println(“Сумма двух чисел равна $result”)
}
fun main() {
         highfun(lambda)
}
                                                                                        23
            Обработка исключений
     Исключение в программировании определяется как
проблема компиляции, возникающая в программе,
которая приводит к ее завершению. Эта проблема может
возникать из-за меньшего объема памяти, массива вне
связи, условий, таких как деление на ноль.
     Обработка исключений определяется как метод,
который обрабатывает проблемы времени выполнения, а
также поддерживает выполнение программы во время
выполнения.

                                                       24
               Обработка исключений
       Для обработки исключений применяется
конструкция try..catch..finally. В блок try помещаются те действия,
которые потенциально могут вызвать исключение (например, передача
файла по сети, открытие файла и т.д.). Блок catch перехватывает
возникшее исключение и обрабатывает его. Блок finally выполняет
некоторые завершающие действия.
• После оператора catch в скобках помещается параметр, который
  представляет тип исключения. Из этого параметра можно получить
  информацию о произошедшем исключении.
• Блок finally является необязательным, его можно опустить. Блок
  catch также может отсутствовать, однако обязательно должен быть
  блок try и как минимум один из блоков: либо catch, либо finally.
  Также конструкция может содержать несколько блоков catch для
  обработки каждого типа исключения, которое может возникнуть.
• Блок catch выполняется, если только возникло исключение. Блок
  finally выполняется в любом случае, даже если нет исключения.



                                                                      25
Обработка исключений




                       26
          Обработка исключений
    Для генерации исключения вручную
применяется оператор throw, после которого
указывается объект исключения.
    После оператора throw указан объект
исключения. Для определения объекта Exception
применяется конструктор, который принимает в
качестве параметра сообщение об исключении. В
данном случае это сообщение о некорректности
введенного значения.

                                                27
Обработка исключений




                       28
                              Kotlin ООП
      Kotlin поддерживает объектно-ориентированную парадигму
программирования, а это значит, что программу на данном языке можно
представить в виде взаимодействующих между собой объектов.
      Представлением объекта является класс. Класс фактически представляет
определение объекта. А объект является конкретным воплощением класса.




      Класс также может содержать функции. Функции определяют поведение
объектов данного класса. Такие функции еще называют member functions или
функции-члены класса.

                                                                             29
                        Наследование
       Наследование происходит, когда некоторые свойства родительского
класса приобретаются дочерним классом. Наследование допускается, когда два
или более классов имеют одинаковые свойства.
       Для всех классов в языке Kotlin родительским суперклассом
является класс Any. Он также является родительским классом для
любого класса, в котором не указан какой-либо другой родительский
класс.




                                                                             30
                              Наследование
      У Any есть три метода: equals(), hashCode() и toString(). Эти методы
определены для всех классов в Kotlin.
      По умолчанию все классы в Kotlin имеют статус final, который блокирует
возможность наследования.
      Чтобы сделать класс наследуемым, его нужно пометить ключевым
словом open.




        Если у класса нет основного конструктора, тогда каждый последующий
дополнительный конструктор должен включать в себя инициализацию базового типа с
помощью ключевого слова super или давать отсылку на другой конструктор, который
это делает. Примечательно, что любые дополнительные конструкторы могут ссылаться
на разные конструкторы базового типа.
                                                                                   31
               Абстрактный класс
     Абстрактный класс — это класс, который не может
быть создан, но мы можем наследовать от него
подклассы. Ключевое слово «abstract» используется для
объявления абстрактного класса.




                                                        32
                     Примеры отличий
Переменные:
Java:                    Kotlin:

int a = 1;               val a = 1
String s = "test";       var b = 2
                         val c: Int
                         val d = "test"


                                          33
                      Примеры отличий
Выражения if/else:
Java:                     Kotlin:
if (вариант 1)            val x = 5
{...}                     val result = when(x) {
else if (вариант 2)            0, 1 -> "cool"
{...}                          2 -> "bad"
...                            5 -> "normal"
else                           else -> "error"
{...}                     }
                                                   34
                                Примеры отличий
Конструкторы:
Java:                                      Kotlin:
public class Person {
                                           class Person(private val firstName: String,
                                                   private val lastName: String,
  private String firstName;
                                                   private var age: Int) {
  private String lastName;
                                           }
  private int age;

  public Person(String firstName, String
lastName, int age) {
     this.firstName = firstName;
     this.lastName = lastName;
     this.age = age;
  }
}                                                                                        35
